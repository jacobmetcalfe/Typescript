"use strict";var __extends=this&&this.__extends||function(){var r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};return function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),__spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,o=0,e=arguments.length;o<e;o++)t+=arguments[o].length;var r=Array(t),s=0;for(o=0;o<e;o++)for(var n=arguments[o],a=0,i=n.length;a<i;a++,s++)r[s]=n[a];return r};exports.__esModule=!0;var todoItem_1=require("./todoItem"),todoCollection_1=require("./todoCollection"),lowdb=require("lowdb"),FileSync=require("lowdb/adapters/FileSync"),JsonTodoCollection=function(r){function t(t,o){void 0===o&&(o=[]);var e=r.call(this,t,[])||this;(e.userName=t,e.database=lowdb(new FileSync("Todos.json")),e.database.has("tasks").value())?e.database.get("tasks").value().forEach(function(t){return e.itemMap.set(t.id,new todoItem_1.TodoItem(t.id,t.task,t.complete))}):(e.database.set("tasks",o).write(),o.forEach(function(t){return e.itemMap.set(t.id,t)}));return e}return __extends(t,r),t.prototype.addTodo=function(t){var o=r.prototype.addTodo.call(this,t);return this.storeTasks(),o},t.prototype.markComplete=function(t,o){r.prototype.markComplete.call(this,t,o),this.storeTasks()},t.prototype.removeComplete=function(){r.prototype.removeComplete.call(this),this.storeTasks()},t.prototype.storeTasks=function(){this.database.set("tasks",__spreadArrays(this.itemMap.values())).write()},t}(todoCollection_1.TodoCollection);exports.JsonTodoCollection=JsonTodoCollection;
//# sourceMappingURL=jsonTodoCollection.min.js.map
